import{_ as s,e as a,f as e,o as p}from"./app-cOqhPLWY.js";const t={};function i(o,n){return p(),a("div",null,n[0]||(n[0]=[e(`<h1 id="浏览器启动配置" tabindex="-1"><a class="header-anchor" href="#浏览器启动配置"><span>浏览器启动配置</span></a></h1><p>selenium 在启动浏览器的时候可以做很多配置，seldom 试图简化这些配置，但是总有很多情况兼顾不到。</p><blockquote><p><code>seldom 3.2</code> 版本开放了这些配置，你只需要将配置传给 seldom 即可。</p></blockquote><h3 id="使用headless模式" tabindex="-1"><a class="header-anchor" href="#使用headless模式"><span>使用headless模式</span></a></h3><p>Firefox和Chrome浏览器支持<code>headless</code>模式，将浏览器置于后台运行，这样不会影响到我们在测试机上完成其他工作。</p><ul><li>chrome</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> ChromeOptions</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ...</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    chrome_options <span class="token operator">=</span> ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    chrome_options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&quot;--headless=new&quot;</span><span class="token punctuation">)</span>  <span class="token comment"># 开启 headless 模式</span></span>
<span class="line">    browser <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;browser&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;chrome&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;options&quot;</span><span class="token punctuation">:</span> chrome_options</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span>browser<span class="token operator">=</span>browser<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>firefox</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> FirefoxOptions</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ...</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    firefox_options <span class="token operator">=</span> FirefoxOptions<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    firefox_options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&quot;-headless&quot;</span><span class="token punctuation">)</span>  <span class="token comment"># 开启 headless 模式</span></span>
<span class="line">    browser <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;browser&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;firefox&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;options&quot;</span><span class="token punctuation">:</span> firefox_options</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span>browser<span class="token operator">=</span>browser<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>edge</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> EdgeOptions</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ...</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    edge_option <span class="token operator">=</span> EdgeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    edge_option<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&quot;--headless=new&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    browser <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;browser&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;edge&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;options&quot;</span><span class="token punctuation">:</span> edge_option</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span>browser<span class="token operator">=</span>browser<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="selenium-grid" tabindex="-1"><a class="header-anchor" href="#selenium-grid"><span>Selenium Grid</span></a></h3><p>首先，安装Java环境，然后下载 <code>selenium-server</code>。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token operator">&gt;</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> .<span class="token punctuation">\\</span>selenium-server-4.12.0.jar standalone</span>
<span class="line"></span>
<span class="line"><span class="token number">23</span>:17:59.476 INFO <span class="token punctuation">[</span>LoggingOptions.configureLogEncoding<span class="token punctuation">]</span> - Using the system default encoding</span>
<span class="line"><span class="token number">23</span>:17:59.481 INFO <span class="token punctuation">[</span>OpenTelemetryTracer.createTracer<span class="token punctuation">]</span> - Using OpenTelemetry <span class="token keyword">for</span> tracing</span>
<span class="line"><span class="token number">23</span>:18:03.933 INFO <span class="token punctuation">[</span>NodeOptions.getSessionFactories<span class="token punctuation">]</span> - Detected <span class="token number">16</span> available processors</span>
<span class="line"><span class="token number">23</span>:18:03.935 INFO <span class="token punctuation">[</span>NodeOptions.discoverDrivers<span class="token punctuation">]</span> - Looking <span class="token keyword">for</span> existing drivers on the <span class="token environment constant">PATH</span><span class="token builtin class-name">.</span></span>
<span class="line"><span class="token number">23</span>:18:03.935 INFO <span class="token punctuation">[</span>NodeOptions.discoverDrivers<span class="token punctuation">]</span> - Add <span class="token string">&#39;--selenium-manager true&#39;</span> to the startup <span class="token builtin class-name">command</span> to setup drivers automatically.</span>
<span class="line"><span class="token number">23</span>:18:04.971 INFO <span class="token punctuation">[</span>SeleniumManager.lambda<span class="token variable">$runCommand</span><span class="token variable">$1</span><span class="token punctuation">]</span> - Driver path: C:<span class="token punctuation">\\</span>webdriver<span class="token punctuation">\\</span>chromedriver.exe</span>
<span class="line"><span class="token number">23</span>:18:04.971 INFO <span class="token punctuation">[</span>SeleniumManager.lambda<span class="token variable">$runCommand</span><span class="token variable">$1</span><span class="token punctuation">]</span> - Browser path: C:<span class="token punctuation">\\</span>Program Files <span class="token punctuation">(</span>x86<span class="token punctuation">)</span><span class="token punctuation">\\</span>Google<span class="token punctuation">\\</span>Chrome<span class="token punctuation">\\</span>Application<span class="token punctuation">\\</span>chrome.exe</span>
<span class="line"><span class="token number">23</span>:18:05.469 INFO <span class="token punctuation">[</span>SeleniumManager.lambda<span class="token variable">$runCommand</span><span class="token variable">$1</span><span class="token punctuation">]</span> - Driver path: D:<span class="token punctuation">\\</span>webdriver<span class="token punctuation">\\</span>msedgedriver.exe</span>
<span class="line"><span class="token number">23</span>:18:05.470 INFO <span class="token punctuation">[</span>SeleniumManager.lambda<span class="token variable">$runCommand</span><span class="token variable">$1</span><span class="token punctuation">]</span> - Browser path: C:<span class="token punctuation">\\</span>Program Files <span class="token punctuation">(</span>x86<span class="token punctuation">)</span><span class="token punctuation">\\</span>Microsoft<span class="token punctuation">\\</span>Edge<span class="token punctuation">\\</span>Application<span class="token punctuation">\\</span>msedge.exe</span>
<span class="line"><span class="token number">23</span>:18:05.847 INFO <span class="token punctuation">[</span>SeleniumManager.lambda<span class="token variable">$runCommand</span><span class="token variable">$1</span><span class="token punctuation">]</span> - Driver path: C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>fnngj<span class="token punctuation">\\</span>.cache<span class="token punctuation">\\</span>selenium<span class="token punctuation">\\</span>geckodriver<span class="token punctuation">\\</span>win64<span class="token punctuation">\\</span><span class="token number">0.33</span>.0<span class="token punctuation">\\</span>geckodriver.exe</span>
<span class="line"><span class="token number">23</span>:18:05.848 INFO <span class="token punctuation">[</span>SeleniumManager.lambda<span class="token variable">$runCommand</span><span class="token variable">$1</span><span class="token punctuation">]</span> - Browser path: C:<span class="token punctuation">\\</span>Program Files<span class="token punctuation">\\</span>Mozilla Firefox<span class="token punctuation">\\</span>firefox.exe</span>
<span class="line"><span class="token number">23</span>:18:06.223 WARN <span class="token punctuation">[</span>SeleniumManager.lambda<span class="token variable">$runCommand</span><span class="token variable">$1</span><span class="token punctuation">]</span> - Unable to discover proper IEDriverServer version <span class="token keyword">in</span> offline mode</span>
<span class="line"><span class="token number">23</span>:18:06.246 INFO <span class="token punctuation">[</span>NodeOptions.report<span class="token punctuation">]</span> - Adding Edge <span class="token keyword">for</span> <span class="token punctuation">{</span><span class="token string">&quot;browserName&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;MicrosoftEdge&quot;</span>,<span class="token string">&quot;ms:edgeOptions&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;args&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;--remote-allow-origins=*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>,<span class="token string">&quot;platformName&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Windows 11&quot;</span><span class="token punctuation">}</span> <span class="token number">16</span> <span class="token builtin class-name">times</span></span>
<span class="line"><span class="token number">23</span>:18:06.247 INFO <span class="token punctuation">[</span>NodeOptions.report<span class="token punctuation">]</span> - Adding Firefox <span class="token keyword">for</span> <span class="token punctuation">{</span><span class="token string">&quot;browserName&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;firefox&quot;</span>,<span class="token string">&quot;platformName&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Windows 11&quot;</span><span class="token punctuation">}</span> <span class="token number">16</span> <span class="token builtin class-name">times</span></span>
<span class="line"><span class="token number">23</span>:18:06.249 INFO <span class="token punctuation">[</span>NodeOptions.report<span class="token punctuation">]</span> - Adding Chrome <span class="token keyword">for</span> <span class="token punctuation">{</span><span class="token string">&quot;browserName&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;chrome&quot;</span>,<span class="token string">&quot;goog:chromeOptions&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;args&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;--remote-allow-origins=*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>,<span class="token string">&quot;platformName&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Windows 11&quot;</span><span class="token punctuation">}</span> <span class="token number">16</span> <span class="token builtin class-name">times</span></span>
<span class="line"><span class="token number">23</span>:18:06.343 INFO <span class="token punctuation">[</span>Node.<span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">]</span> - Binding additional locator mechanisms: relative</span>
<span class="line"><span class="token number">23</span>:18:06.360 INFO <span class="token punctuation">[</span>GridModel.setAvailability<span class="token punctuation">]</span> - Switching Node 35d0ca88-221c-4dba-8ad5-08b20a1280fc <span class="token punctuation">(</span>uri: http://192.168.0.202:4444<span class="token punctuation">)</span> from DOWN to UP</span>
<span class="line"><span class="token number">23</span>:18:06.361 INFO <span class="token punctuation">[</span>LocalDistributor.add<span class="token punctuation">]</span> - Added <span class="token function">node</span> 35d0ca88-221c-4dba-8ad5-08b20a1280fc at http://192.168.0.202:4444. Health check every 120s</span>
<span class="line"><span class="token number">23</span>:18:07.915 INFO <span class="token punctuation">[</span>Standalone.execute<span class="token punctuation">]</span> - Started Selenium Standalone <span class="token number">4.12</span>.0 <span class="token punctuation">(</span>revision 249f2a7d1b*<span class="token punctuation">)</span>: http://192.168.0.202:4444</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> ChromeOptions</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ……</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    chrome_options <span class="token operator">=</span> ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    browser <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;options&quot;</span><span class="token punctuation">:</span> chrome_options<span class="token punctuation">,</span>  <span class="token comment"># chrome浏览器配置，其他类似</span></span>
<span class="line">        <span class="token string">&quot;command_executor&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;http://192.168.0.202:4444&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span>browser<span class="token operator">=</span>browser<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>设置远程节点，<a href="https://www.selenium.dev/documentation/grid/getting_started/" target="_blank" rel="noopener noreferrer">selenium Grid doc</a>。</li></ul><h3 id="mobile-web-模式" tabindex="-1"><a class="header-anchor" href="#mobile-web-模式"><span>Mobile Web 模式</span></a></h3><p>seldom 还支持 Mobile web 模式：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> ChromeOptions</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ...</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    chrome_options <span class="token operator">=</span> ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    chrome_options<span class="token punctuation">.</span>add_experimental_option<span class="token punctuation">(</span><span class="token string">&quot;mobileEmulation&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;deviceName&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;iPhone 8&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    browser <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;browser&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;chrome&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;options&quot;</span><span class="token punctuation">:</span> chrome_options<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span>debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> browser<span class="token operator">=</span>browser<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>deviceName: 指定移动设备的型号。</li></ul><blockquote><p>移动设备通过通过 浏览器开发者工具 查看，参考型号： &#39;iPhone 8&#39;, &#39;iPhone 8 Plus&#39;, &#39;iPhone SE&#39;, &#39;iPhone X&#39;, &#39;iPhone XR&#39;, &#39;iPhone 12 Pro&#39;, &#39;Pixel 2&#39;, &#39;Pixel XL&#39;, &#39;Pixel 5&#39;, &#39;Samsung Galaxy S8+&#39;, &#39;Samsung Galaxy S20 Ultra&#39;, &#39;iPad Air&#39;, &#39;iPad Pro&#39;, &#39;iPad Mini&#39;。</p></blockquote><h3 id="浏览器忽略无效证书" tabindex="-1"><a class="header-anchor" href="#浏览器忽略无效证书"><span>浏览器忽略无效证书</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> ChromeOptions</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ...</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    chrome_options <span class="token operator">=</span> ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    chrome_options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;--ignore-certificate-errors&#39;</span><span class="token punctuation">)</span>  <span class="token comment"># 忽略无效证书的问题</span></span>
<span class="line">    browser <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;browser&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;chrome&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;options&quot;</span><span class="token punctuation">:</span> chrome_options<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span>browser<span class="token operator">=</span>browser<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="浏览器关闭沙盒模式" tabindex="-1"><a class="header-anchor" href="#浏览器关闭沙盒模式"><span>浏览器关闭沙盒模式</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> ChromeOptions</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ...</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    chrome_options <span class="token operator">=</span> ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    chrome_options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;--no-sandbox&#39;</span><span class="token punctuation">)</span>  <span class="token comment"># 关闭沙盒模式</span></span>
<span class="line">    browser <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;browser&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;chrome&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;options&quot;</span><span class="token punctuation">:</span> chrome_options<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span>browser<span class="token operator">=</span>browser<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="开启实验性功能" tabindex="-1"><a class="header-anchor" href="#开启实验性功能"><span>开启实验性功能</span></a></h3><p>chrome开启实验性功能参数 <code>excludeSwitches</code>。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> ChromeOptions</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ...</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    chrome_options <span class="token operator">=</span> ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    chrome_options<span class="token punctuation">.</span>add_experimental_option<span class="token punctuation">(</span><span class="token string">&quot;excludeSwitches&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;enable-automation&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;enable-logging&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    browser <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;browser&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;chrome&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;options&quot;</span><span class="token punctuation">:</span> chrome_options<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span>browser<span class="token operator">=</span>browser<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="设置浏览器代理" tabindex="-1"><a class="header-anchor" href="#设置浏览器代理"><span>设置浏览器代理</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> ChromeOptions</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ...</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    proxy <span class="token operator">=</span> <span class="token string">&quot;127.0.0.1:1080&quot;</span>  <span class="token comment"># 示例代理地址和端口</span></span>
<span class="line"></span>
<span class="line">    chrome_options <span class="token operator">=</span> ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    chrome_options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;--proxy-server=</span><span class="token interpolation"><span class="token punctuation">{</span>proxy<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    browser <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;browser&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;chrome&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;options&quot;</span><span class="token punctuation">:</span> chrome_options<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span>browser<span class="token operator">=</span>browser<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="连接已打开浏览器" tabindex="-1"><a class="header-anchor" href="#连接已打开浏览器"><span>连接已打开浏览器</span></a></h3><ul><li>查看浏览器安装位置</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token operator">&gt;</span> selenium-manager.exe  <span class="token parameter variable">--browser</span> edge</span>
<span class="line"><span class="token punctuation">[</span><span class="token number">2024</span>-10-08T03:50:40.000Z INFO <span class="token punctuation">]</span> Driver path: C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>xx<span class="token punctuation">\\</span>.cache<span class="token punctuation">\\</span>selenium<span class="token punctuation">\\</span>msedgedriver<span class="token punctuation">\\</span>win64<span class="token punctuation">\\</span><span class="token number">130.0</span>.2849.13<span class="token punctuation">\\</span>msedgedriver.exe</span>
<span class="line"><span class="token punctuation">[</span><span class="token number">2024</span>-10-08T03:50:40.000Z INFO <span class="token punctuation">]</span> Browser path: C:<span class="token punctuation">\\</span>Program Files <span class="token punctuation">(</span>x86<span class="token punctuation">)</span><span class="token punctuation">\\</span>Microsoft<span class="token punctuation">\\</span>Edge<span class="token punctuation">\\</span>Application<span class="token punctuation">\\</span>msedge.exe</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>启动浏览器</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">msedge.exe  --remote-debugging-port<span class="token operator">=</span><span class="token number">9527</span> --user-data-dir<span class="token operator">=</span><span class="token string">&quot;D:\\webdriver<span class="token entity" title="\\e">\\e</span>dge&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>--remote-debugging-port</code>: 浏览器远程调试端口。</p><p><code>--user-data-dir</code>: 用户数据目录，创建一个空目录用于保存浏览器用户数据数据。</p><ul><li>启动浏览器指定端口</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> EdgeOptions</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ...</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    option <span class="token operator">=</span> EdgeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># 设置连接已打开浏览器</span></span>
<span class="line">    option<span class="token punctuation">.</span>add_experimental_option<span class="token punctuation">(</span><span class="token string">&quot;debuggerAddress&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;127.0.0.1:9527&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    browser <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;browser&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;edge&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;options&quot;</span><span class="token punctuation">:</span> option</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span>browser<span class="token operator">=</span>browser<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,39)]))}const c=s(t,[["render",i],["__file","other.html.vue"]]),u=JSON.parse('{"path":"/web-testing/other.html","title":"浏览器启动配置","lang":"en-US","frontmatter":{},"headers":[{"level":3,"title":"使用headless模式","slug":"使用headless模式","link":"#使用headless模式","children":[]},{"level":3,"title":"Selenium Grid","slug":"selenium-grid","link":"#selenium-grid","children":[]},{"level":3,"title":"Mobile Web 模式","slug":"mobile-web-模式","link":"#mobile-web-模式","children":[]},{"level":3,"title":"浏览器忽略无效证书","slug":"浏览器忽略无效证书","link":"#浏览器忽略无效证书","children":[]},{"level":3,"title":"浏览器关闭沙盒模式","slug":"浏览器关闭沙盒模式","link":"#浏览器关闭沙盒模式","children":[]},{"level":3,"title":"开启实验性功能","slug":"开启实验性功能","link":"#开启实验性功能","children":[]},{"level":3,"title":"设置浏览器代理","slug":"设置浏览器代理","link":"#设置浏览器代理","children":[]},{"level":3,"title":"连接已打开浏览器","slug":"连接已打开浏览器","link":"#连接已打开浏览器","children":[]}],"git":{"updatedTime":1728362031000,"contributors":[{"name":"defnngj","username":"defnngj","email":"defnngj@gmail.com","commits":11,"url":"https://github.com/defnngj"},{"name":"fnngj","username":"fnngj","email":"fnngj@126.com","commits":1,"url":"https://github.com/fnngj"}],"changelog":[{"hash":"e0ea32a9914cfe73ea32d30a92ca62719ae151e9","time":1728362031000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝️ browser remote debugging #174"},{"hash":"f67316e4559f5fbcecd338409edf03a76911dcab","time":1726068335000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝️ setting browser proxy #31"},{"hash":"8cfd81ad76b6cfd2b7efd0362467a291699f8aba","time":1725890482000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝️ update docs"},{"hash":"bba82e2c1687ab7ff52b3b83a00675f0d947f73d","time":1714926319000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝️ set <code v-pre>executable_path</code> doc."},{"hash":"8e786e21121b8b4d7977abd78d1f2cbd3960b202","time":1694273637000,"email":"defnngj@gmail.com","author":"defnngj","message":"✨  selenium manager browser driver."},{"hash":"7c2c052de964a219a0abaeba7a2cfcfd0c27d7b1","time":1683533370000,"email":"fnngj@126.com","author":"fnngj","message":"🐛 fix option -&gt; options"},{"hash":"103bb63ad96fee76168639414558a0f14fbe4e7e","time":1680431607000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝️ fix doc error"},{"hash":"4bf0a00fabf733a32bc73aa7ab5cda6db7f2cedc","time":1678721832000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝️ driver setting doc"},{"hash":"45f6f437739728faf88bb93aaed9557a4056d552","time":1676471110000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝️ update doc"},{"hash":"7de76cd9533d957339565d703dc72c43b17914d9","time":1660233118000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝️️  update chrome setting doc"},{"hash":"cad6118a848593d910ba702a2fb1552750e7212f","time":1658852963000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝️️ selenium grid 4 doc."},{"hash":"8f0025aee78b42c6db150a5fdbddadfc6ddbba9f","time":1657640958000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝 web and http doc"}]},"filePathRelative":"web-testing/other.md"}');export{c as comp,u as data};
