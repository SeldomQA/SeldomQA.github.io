import{_ as n,e as a,f as e,o as p}from"./app-cOqhPLWY.js";const t={};function l(o,s){return p(),a("div",null,s[0]||(s[0]=[e(`<h1 id="平台化支持" tabindex="-1"><a class="header-anchor" href="#平台化支持"><span>平台化支持</span></a></h1><p>为了更好的支持测试用例平台化，Seldom 提供了API用于获取用例列表，以及根据传入的用例信息运行测试用例。</p><h2 id="接入平台方式" tabindex="-1"><a class="header-anchor" href="#接入平台方式"><span>接入平台方式</span></a></h2><p>seldom-platform项目: https://github.com/SeldomQA/seldom-platform</p><p>目录结构如下：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">mypro/</span>
<span class="line">├── test_dir/</span>
<span class="line">│   ├── module_api/</span>
<span class="line">│   │   ├── test_http_demo.py</span>
<span class="line">│   ├── module_web/</span>
<span class="line">│   │   ├── test_first_demo.py</span>
<span class="line">│   │   ├── test_ddt_demo.py</span>
<span class="line">└── run.py</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="获取用例信息" tabindex="-1"><a class="header-anchor" href="#获取用例信息"><span>获取用例信息</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># run.py</span></span>
<span class="line"><span class="token keyword">from</span> seldom <span class="token keyword">import</span> SeldomTestLoader</span>
<span class="line"><span class="token keyword">from</span> seldom <span class="token keyword">import</span> TestMainExtend</span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    SeldomTestLoader<span class="token punctuation">.</span>collectCaseInfo <span class="token operator">=</span> <span class="token boolean">True</span></span>
<span class="line">    main_extend <span class="token operator">=</span> TestMainExtend<span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">&quot;./test_dir/&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    case_info <span class="token operator">=</span> main_extend<span class="token punctuation">.</span>collect_cases<span class="token punctuation">(</span>json<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>case_info<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>说明</strong></p><p>返回的用例信息列表：</p><ul><li><code>collectCaseInfo</code> ：<code>collectCaseInfo</code>设置为<code>True</code> 说明需要收集用例信息。</li><li><code>TestMainExtend(path=&quot;./test_dir/&quot;)</code> ： <code>TestMainExtend</code>类是<code>TestMain</code>类的扩展，<code>path</code>设置收集用例的目录，不能为空。</li><li><code>collect_cases(json=False, level=&quot;data&quot;, warning=False)</code>：返回收集的用例信息。 <ul><li><code>json=False</code>：默认为<code>list</code>格式；设置为<code>True</code>返回<code>json</code>格式。</li><li><code>level=&quot;data&quot;</code> ：默认为<code>data</code>，数据驱动的每条数据被解析为一条用例。如果设置为 <code>method</code> 数据驱动的方法被解析为一条用例。</li><li><code>warning=False</code>: 默认为<code>False</code>, 在收集用例的过程中，因为缺少依赖库，或导包错误会导致部分用例收集报错，是否要将这些错误保存下来。开启（True）后，默认保存在<code>reports/collect_warning.log</code> 文件中。</li></ul></li></ul><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code><span class="line"><span class="token punctuation">[</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module_api.test_http_demo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;class&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TestRequest&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\\n    http api test demo\\n    doc: https://requests.readthedocs.io/en/master/\\n    &quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test_get_method&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\\n        test get request\\n        &quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module_api.test_http_demo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;class&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TestRequest&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\\n    http api test demo\\n    doc: https://requests.readthedocs.io/en/master/\\n    &quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test_post_method&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\\n        test post request\\n        &quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module_web.test_ddt_demo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;class&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BaiduTest&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Baidu search test case&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test_baidu_0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;used parameterized test [with name=1, search_key=&#39;seldom&#39;]\\n        :param name: case name\\n        :param search_key: search keyword\\n        &quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module_web.test_ddt_demo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;class&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BaiduTest&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Baidu search test case&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test_baidu_1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;used parameterized test [with name=2, search_key=&#39;selenium&#39;]\\n        :param name: case name\\n        :param search_key: search keyword\\n        &quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module_web.test_ddt_demo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;class&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BaiduTest&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Baidu search test case&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test_baidu_2&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;used parameterized test [with name=3, search_key=&#39;unittest&#39;]\\n        :param name: case name\\n        :param search_key: search keyword\\n        &quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module_web.test_first_demo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;class&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BaiduTest&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Baidu search test case&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test_case&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a simple test case &quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>数据结构说明：</p><ul><li>file: 获取类的文件名，包含目录名。</li><li>class: 测试类的名字<code>name</code> 和 描述<code>doc</code>。</li><li>method: 测试方法的名字<code>name</code> 和 描述<code>doc</code>, <code>label</code>。</li></ul><blockquote><p>注明：seldom==3.11.0 版本测试方法增加<code>label</code>字段。</p></blockquote><h3 id="执行用例信息" tabindex="-1"><a class="header-anchor" href="#执行用例信息"><span>执行用例信息</span></a></h3><p>当获取用例信息之后，可以进行自定义，例如 挑选出需要执行的用例，重新传给Seldom 执行。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># run.py</span></span>
<span class="line"><span class="token keyword">from</span> seldom <span class="token keyword">import</span> TestMainExtend</span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># 自定义要执行的用例</span></span>
<span class="line">    cases <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string">&quot;file&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;module_web.test_first_demo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&quot;class&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;BaiduTest&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">&quot;doc&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Baidu search test case&quot;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&quot;method&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;test_case&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">&quot;doc&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;a simple test case &quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">&quot;label&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">    main_extend <span class="token operator">=</span> TestMainExtend<span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">&quot;./test_dir&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    main_extend<span class="token punctuation">.</span>run_cases<span class="token punctuation">(</span>cases<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>说明：</p><ul><li><code>cases</code> 定义要执行的用例信息， <code>doc</code> 非必填字段。</li><li><code>TestMainExtend(path=&quot;./test_dir&quot;)</code> : 其中<code>path</code>指定从哪个目录查找用例集合。</li><li><code>run_cases(cases)</code>: 运行用例。</li></ul><h2 id="接入平台必读" tabindex="-1"><a class="header-anchor" href="#接入平台必读"><span>接入平台必读</span></a></h2><p>如果你只是使用seldom框架编写用例，那么代码只要框架能运行即可，如果要接入seldom-platform平台，那么需要注意一下几点。</p><h4 id="🚧-测试每个子目录必须包含-init-py文件。" tabindex="-1"><a class="header-anchor" href="#🚧-测试每个子目录必须包含-init-py文件。"><span>🚧 测试每个子目录必须包含<code>__init__.py</code>文件。</span></a></h4><ul><li>目录结构</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">├───reports</span>
<span class="line">├───test_data</span>
<span class="line">├───test_dir</span>
<span class="line">│   ├───api_case</span>
<span class="line">│   │   └───__init__.py</span>
<span class="line">│   ├───app_case</span>
<span class="line">│   │   └───__init__.py</span>
<span class="line">│   ├───web_case</span>
<span class="line">│   │   └───__init__.py</span>
<span class="line">│   └───__init__.py</span>
<span class="line">└───run.py</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>如果子目录不添加 <strong>init</strong>.py 文件会导致目录下面的用例无法解析。</p></blockquote><h4 id="🚧-用例的前置动作" tabindex="-1"><a class="header-anchor" href="#🚧-用例的前置动作"><span>🚧 用例的前置动作</span></a></h4><p>在用 seldom框架写用例的时候需要执行一些<code>前置/后置</code>动作。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> seldom<span class="token punctuation">.</span>utils <span class="token keyword">import</span> cache</span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># 前置动作</span></span>
<span class="line">    cache<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;token123&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># 执行用例</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token string">&quot;./test_dir&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># 后置动作</span></span>
<span class="line">    cache<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但是，平台执行的时候，不会执行 <code>前置/后置</code>动作。 那么，为了使平台可以执行前置动作，需要使用<code>confrun.py</code>文件进行配置。</p><ul><li>目录结构</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">├───reports</span>
<span class="line">├───test_data</span>
<span class="line">├───test_dir</span>
<span class="line">│   ├───<span class="token punctuation">..</span>.</span>
<span class="line">├───confrun.py</span>
<span class="line">└───run.py</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>confrun.py配置</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token triple-quoted-string string">&quot;&quot;&quot;</span>
<span class="line">seldom confrun.py  hooks function</span>
<span class="line">&quot;&quot;&quot;</span></span>
<span class="line"><span class="token keyword">from</span> seldom<span class="token punctuation">.</span>utils <span class="token keyword">import</span> cache</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">start_run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;前置动作&quot;&quot;&quot;</span></span>
<span class="line">    cache<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;token123&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">end_run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;后置动作&quot;&quot;&quot;</span></span>
<span class="line">    cache<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>run.py文件</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># 执行用例</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token string">&quot;./test_dir&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过上面的配置，<code>前置、后置</code>动作就可以在平台上运行，当然，这样设置本地也可正常运行。</p>`,37)]))}const c=n(t,[["render",l],["__file","platform.html.vue"]]),u=JSON.parse('{"path":"/platform/platform.html","title":"平台化支持","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"接入平台方式","slug":"接入平台方式","link":"#接入平台方式","children":[{"level":3,"title":"获取用例信息","slug":"获取用例信息","link":"#获取用例信息","children":[]},{"level":3,"title":"执行用例信息","slug":"执行用例信息","link":"#执行用例信息","children":[]}]},{"level":2,"title":"接入平台必读","slug":"接入平台必读","link":"#接入平台必读","children":[]}],"git":{"updatedTime":1737219154000,"contributors":[{"name":"defnngj","username":"defnngj","email":"defnngj@gmail.com","commits":8,"url":"https://github.com/defnngj"},{"name":"zhiheng","username":"zhiheng","email":"zhiheng.hu@klook.com","commits":1,"url":"https://github.com/zhiheng"},{"name":"Yongchin","username":"Yongchin","email":"yongchin39@qq.com","commits":1,"url":"https://github.com/Yongchin"},{"name":"yangqing","username":"yangqing","email":"yongchin39@qq.com","commits":1,"url":"https://github.com/yangqing"},{"name":"fnngj","username":"fnngj","email":"fnngj@126.com","commits":1,"url":"https://github.com/fnngj"}],"changelog":[{"hash":"e51b359958f4dcd6ae2028adc16a385bbabb3538","time":1737219154000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝 fix version error"},{"hash":"77452d3292af4ab2f0043b9d814d038a448d7f6b","time":1735354129000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝 update <code v-pre>env</code> doc"},{"hash":"18d6e3c86fb4b99b12956096cbb6818aa5055244","time":1734537706000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝 update platform doc."},{"hash":"011e0998b13256809cbb4f5efd61acae27904bcd","time":1734484165000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝 update platform doc."},{"hash":"b5030dbbbae9c7911c8319fc5e36cf4969c2504c","time":1667053189000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝️ update platform used doc"},{"hash":"71258804589bb76b25d5b89185d33ad25239b337","time":1657533122000,"email":"fnngj@126.com","author":"fnngj","message":"📝 update platform doc"},{"hash":"6f322f4e2b2331b1b8348b41bf506f494e078b8f","time":1649406367000,"email":"yongchin39@qq.com","author":"yangqing","message":"Create an experimental docs by vuepress"},{"hash":"c84079234fbb5b39379372d8e0ed26379551608f","time":1649406367000,"email":"yongchin39@qq.com","author":"Yongchin","message":"Create an experimental docs by vuepress"},{"hash":"a760b6f5b60807edcbaeb5405f58a4d72a3d3ead","time":1644723046000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝 doc: add seldom-platform link"},{"hash":"2a40b0f07462b13902811651582e110b2cd675a4","time":1643040084000,"email":"defnngj@gmail.com","author":"defnngj","message":"doc: update"},{"hash":"fdd918fb6c68ec7b621b060cc0a030dc69591a0b","time":1642989834000,"email":"zhiheng.hu@klook.com","author":"zhiheng","message":"doc: update platform doc"},{"hash":"8faee37a1054bb8b933cfcfd9413061cf770b20e","time":1642910099000,"email":"defnngj@gmail.com","author":"defnngj","message":"doc: platform support"}]},"filePathRelative":"platform/platform.md"}');export{c as comp,u as data};
