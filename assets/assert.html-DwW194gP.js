import{_ as n,e as a,f as t,o as p}from"./app-cOqhPLWY.js";const e={};function o(l,s){return p(),a("div",null,s[0]||(s[0]=[t(`<h1 id="æ¥å£æ–­è¨€" tabindex="-1"><a class="header-anchor" href="#æ¥å£æ–­è¨€"><span>æ¥å£æ–­è¨€</span></a></h1><p>æ–­è¨€æ¥å£è¿”å›çš„æ•°æ®æ˜¯HTTPæ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•éå¸¸é‡è¦çš„å·¥ä½œï¼Œæä¾›å¼ºå¤§çš„æ–­è¨€æ–¹æ³•å¯ä»¥æé«˜ç”¨ä¾‹çš„ç¼–å†™æ•ˆç‡ã€‚</p><h2 id="assertjson" tabindex="-1"><a class="header-anchor" href="#assertjson"><span>assertJSON</span></a></h2><p><code>assertJSON()</code> æ–­è¨€æ¥å£è¿”å›çš„æŸéƒ¨åˆ†æ•°æ®ã€‚</p><ul><li>è¯·æ±‚å‚æ•°</li></ul><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;hobby&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&quot;basketball&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;swim&quot;</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿”å›ç»“æœ</li></ul><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;hobby&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">&quot;basketball&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string">&quot;swim&quot;</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tom&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;headers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;Accept&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*/*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;Accept-Encoding&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gzip, deflate&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;Host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;httpbin.org&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;User-Agent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;python-requests/2.25.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;X-Amzn-Trace-Id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Root=1-62851614-1ca9fdb276238c60406c118f&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;origin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;113.87.15.99&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://httpbin.org/get?name=tom&amp;hobby=basketball&amp;hobby=swim&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘çš„ç›®æ ‡æ˜¯æ–­è¨€<code>name</code> å’Œ <code>hobby</code> éƒ¨åˆ†çš„å†…å®¹ã€‚</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">TestAPI</span><span class="token punctuation">(</span>seldom<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">test_assert_json</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># æ¥å£å‚æ•°</span></span>
<span class="line">        payload <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hobby&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;basketball&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;swim&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment"># æ¥å£è°ƒç”¨</span></span>
<span class="line">        self<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;http://httpbin.org/get&quot;</span><span class="token punctuation">,</span> params<span class="token operator">=</span>payload<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># æ–­è¨€æ•°æ®</span></span>
<span class="line">        assert_data <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string">&quot;hobby&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;swim&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;basketball&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;tom&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        self<span class="token punctuation">.</span>assertJSON<span class="token punctuation">(</span>assert_data<span class="token punctuation">,</span> self<span class="token punctuation">.</span>response<span class="token punctuation">[</span><span class="token string">&quot;args&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> exclude<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>exclude ç”¨äºè®¾ç½®è·³è¿‡çš„æ£€æŸ¥å­—æ®µï¼Œä¾‹å¦‚ä¸€äº› æ—¶é—´ã€éšæœºæ•° ç­‰ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¸ä¸€æ ·ï¼Œä½†å¹¶ä¸å½±å“ç»“æœçš„æ­£ç¡®æ€§ã€‚é€šè¿‡ exclude æ¥è®¾ç½®å±è”½è¿™äº›å­—æ®µçš„æ£€æŸ¥ã€‚</li></ul><h2 id="assertpath" tabindex="-1"><a class="header-anchor" href="#assertpath"><span>assertPath</span></a></h2><p><code>assertPath</code> æ˜¯åŸºäº <code>jmespath</code> å®ç°çš„æ–­è¨€ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ã€‚</p><ul><li>jmespath: https://jmespath.org/specification.html</li></ul><p>æ¥å£è¿”å›æ•°æ®å¦‚ä¸‹ï¼š</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;hobby&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">&quot;basketball&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string">&quot;swim&quot;</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tom&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>seldomä¸­å¯ä»¥é€šè¿‡pathè¿›è¡Œæ–­è¨€ï¼š</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">TestAPI</span><span class="token punctuation">(</span>seldom<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">test_assert_path</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        payload <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;tom&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;hobby&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;basketball&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;swim&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>
<span class="line">        self<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;http://httpbin.org/get&quot;</span><span class="token punctuation">,</span> params<span class="token operator">=</span>payload<span class="token punctuation">)</span></span>
<span class="line">        self<span class="token punctuation">.</span>assertPath<span class="token punctuation">(</span><span class="token string">&quot;args.name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tom&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        self<span class="token punctuation">.</span>assertPath<span class="token punctuation">(</span><span class="token string">&quot;args.hobby[0]&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;basketball&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        self<span class="token punctuation">.</span>assertInPath<span class="token punctuation">(</span><span class="token string">&quot;args.hobby[0]&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ball&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>args.hobby[0]</code> æå–æ¥å£è¿”å›çš„æ•°æ®ã€‚</li><li><code>assertPath()</code> åˆ¤æ–­æå–çš„æ•°æ®æ˜¯å¦ç­‰äº<code>basketball</code>;</li><li><code>assertInPath()</code> åˆ¤æ–­æå–çš„æ•°æ®æ˜¯å¦åŒ…å«<code>ball</code>ã€‚</li></ul><h2 id="assertschema" tabindex="-1"><a class="header-anchor" href="#assertschema"><span>assertSchema</span></a></h2><p>å½“ä½ ä¸å…³å¿ƒæ•°æ®æœ¬èº«æ˜¯ä»€ä¹ˆï¼Œè€Œæ˜¯å…³å¿ƒæ•°æ®çš„ç»“æ„å’Œç±»å‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>assertSchema</code> æ–­è¨€æ–¹æ³•ã€‚ <code>assertSchema</code> æ˜¯åŸºäº <code>jsonschema</code> å®ç°çš„æ–­è¨€æ–¹æ³•ã€‚</p><ul><li>jsonschema: https://json-schema.org/learn/</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> seldom<span class="token punctuation">.</span>utils <span class="token keyword">import</span> genson</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">TestAPI</span><span class="token punctuation">(</span>seldom<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">test_assert_schema</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># æ¥å£å‚æ•°</span></span>
<span class="line">        payload <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;hobby&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;basketball&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;swim&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;18&quot;</span><span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment"># è°ƒç”¨æ¥å£</span></span>
<span class="line">        self<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;/get&quot;</span><span class="token punctuation">,</span> params<span class="token operator">=</span>payload<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># ç”Ÿæˆæ•°æ®ç»“æ„å’Œç±»å‹</span></span>
<span class="line">        schema <span class="token operator">=</span> genson<span class="token punctuation">(</span>self<span class="token punctuation">.</span>response<span class="token punctuation">[</span><span class="token string">&quot;args&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;json Schema: \\n&quot;</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># æ–­è¨€æ•°æ®ç»“æ„å’Œç±»å‹</span></span>
<span class="line">        assert_data <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string">&quot;$schema&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;http://json-schema.org/schema#&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&quot;properties&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">&quot;hobby&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;array&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;items&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span></span>
<span class="line">                <span class="token punctuation">[</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hobby&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        self<span class="token punctuation">.</span>assertSchema<span class="token punctuation">(</span>assert_data<span class="token punctuation">,</span> self<span class="token punctuation">.</span>response<span class="token punctuation">[</span><span class="token string">&quot;args&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>genson</code>: å¯ä»¥ç”Ÿæˆ<code>jsonschema</code>æ•°æ®ç»“æ„å’Œç±»å‹ï¼ˆ<code>seldom 2.9</code> æ–°å¢ï¼‰ã€‚</li></ul>`,24)]))}const i=n(e,[["render",o],["__file","assert.html.vue"]]),u=JSON.parse('{"path":"/api-testing/assert.html","title":"æ¥å£æ–­è¨€","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"assertJSON","slug":"assertjson","link":"#assertjson","children":[]},{"level":2,"title":"assertPath","slug":"assertpath","link":"#assertpath","children":[]},{"level":2,"title":"assertSchema","slug":"assertschema","link":"#assertschema","children":[]}],"git":{"updatedTime":1742121997000,"contributors":[{"name":"defnngj","username":"defnngj","email":"defnngj@gmail.com","commits":4,"url":"https://github.com/defnngj"}],"changelog":[{"hash":"ee7baed8f0cfa8c864d38c5c4149c1151a357c5e","time":1742121997000,"email":"defnngj@gmail.com","author":"defnngj","message":"ğŸ“ update doc"},{"hash":"45f6f437739728faf88bb93aaed9557a4056d552","time":1676471110000,"email":"defnngj@gmail.com","author":"defnngj","message":"ğŸ“ï¸ update doc"},{"hash":"4276e4eceea97c3b7f876f349e1caaf62b1af720","time":1674916905000,"email":"defnngj@gmail.com","author":"defnngj","message":"ğŸ“ï¸ update assertJSON doc"},{"hash":"8f0025aee78b42c6db150a5fdbddadfc6ddbba9f","time":1657640958000,"email":"defnngj@gmail.com","author":"defnngj","message":"ğŸ“ web and http doc"}]},"filePathRelative":"api-testing/assert.md"}');export{i as comp,u as data};
