import{_ as s,e as a,f as e,o as i}from"./app-CJFllaMF.js";const p={};function t(l,n){return i(),a("div",null,n[0]||(n[0]=[e(`<h1 id="adb-操作" tabindex="-1"><a class="header-anchor" href="#adb-操作"><span>ADB 操作</span></a></h1><p>App（Android)测试必然需要用到adb命令， seldom根据需要封装了几个常用的操作。</p><ul><li>获取设备信息</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> seldom<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>adbutils <span class="token keyword">import</span> ADBUtils</span>
<span class="line"></span>
<span class="line">adb <span class="token operator">=</span> ADBUtils<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">devices <span class="token operator">=</span> adb<span class="token punctuation">.</span>refresh_devices<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;当前连接设备:&quot;</span><span class="token punctuation">,</span> devices<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 设置默认设备 - 多设备的情况下,后续操作需要设置设备ID</span></span>
<span class="line"><span class="token keyword">if</span> devices<span class="token punctuation">:</span></span>
<span class="line">    adb<span class="token punctuation">.</span>set_default_device<span class="token punctuation">(</span>devices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>打印信息:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">当前连接设备: <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">&#39;MDX0220413011925&#39;</span>, <span class="token string">&#39;ELS-AN00&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>获取当前启动的app信息</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">from seldom.utils.adbutils <span class="token function">import</span> ADBUtils</span>
<span class="line"></span>
<span class="line">adb <span class="token operator">=</span> ADBUtils<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">app_info <span class="token operator">=</span> adb.get_app_info<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token for-or-select variable">info</span> <span class="token keyword">in</span> app_info:</span>
<span class="line">    print<span class="token punctuation">(</span>info<span class="token punctuation">[</span><span class="token string">&#39;package&#39;</span><span class="token punctuation">]</span>, info<span class="token punctuation">[</span><span class="token string">&quot;activity&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>打印信息</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">com.huawei.android.launcher com.huawei.android.launcher.unihome.UniHomeLauncher</span>
<span class="line">com.hpbr.bosszhipin com.hpbr.bosszhipin.module.main.activity.MainActivity</span>
<span class="line">com.android.mms com.android.mms.ui.ConversationList</span>
<span class="line">com.tencent.mm com.tencent.mm.ui.LauncherUI</span>
<span class="line">com.delivery.aggregator com.delivery.aggregator.activity.QYMainActivity</span>
<span class="line">com.huawei.browser com.huawei.browser.BrowserMainActivity</span>
<span class="line">com.huawei.android.launcher .unihome.UniHomeLauncher</span>
<span class="line">com.hpbr.bosszhipin .module.main.activity.MainActivity</span>
<span class="line">com.android.mms .ui.ConversationList</span>
<span class="line">com.tencent.mm .ui.LauncherUI</span>
<span class="line">com.delivery.aggregator .activity.QYMainActivity</span>
<span class="line">com.huawei.browser .BrowserMainActivity</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>启动&amp;关闭app</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> time</span>
<span class="line"><span class="token keyword">from</span> seldom<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>adbutils <span class="token keyword">import</span> ADBUtils</span>
<span class="line"></span>
<span class="line">adb <span class="token operator">=</span> ADBUtils<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">package <span class="token operator">=</span> <span class="token string">&quot;com.microsoft.bing&quot;</span></span>
<span class="line"><span class="token keyword">if</span> adb<span class="token punctuation">.</span>launch_app<span class="token punctuation">(</span>package<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;成功启动 </span><span class="token interpolation"><span class="token punctuation">{</span>package<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> adb<span class="token punctuation">.</span>close_app<span class="token punctuation">(</span>package<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;成功关闭 </span><span class="token interpolation"><span class="token punctuation">{</span>package<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>打印信息:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">成功启动 com.microsoft.bing</span>
<span class="line">成功关闭 com.microsoft.bing</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,14)]))}const o=s(p,[["render",t],["__file","adb_lib.html.vue"]]),u=JSON.parse('{"path":"/app-testing/adb_lib.html","title":"ADB 操作","lang":"en-US","frontmatter":{},"headers":[],"git":{"updatedTime":1744941795000,"contributors":[{"name":"defnngj","username":"defnngj","email":"defnngj@gmail.com","commits":2,"url":"https://github.com/defnngj"}],"changelog":[{"hash":"c1672f6b85e5253bd3eada19e86ca425173848ad","time":1744941795000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝 update adb doc."},{"hash":"ee7baed8f0cfa8c864d38c5c4149c1151a357c5e","time":1742121997000,"email":"defnngj@gmail.com","author":"defnngj","message":"📝 update doc"}]},"filePathRelative":"app-testing/adb_lib.md"}');export{o as comp,u as data};
