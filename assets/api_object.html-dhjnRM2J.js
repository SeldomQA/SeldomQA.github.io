import{_ as n,e as a,f as e,o as p}from"./app-CJFllaMF.js";const t={};function l(i,s){return p(),a("div",null,s[0]||(s[0]=[e(`<h1 id="api-object" tabindex="-1"><a class="header-anchor" href="#api-object"><span>API Object</span></a></h1><p>API Object Modelsï¼Œç®€ç§°AOMï¼ŒAOMæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒå›´ç»•ç€å°†APIã€è·¯ç”±æˆ–åŠŸèƒ½äº¤äº’åŠå…¶ç›¸å…³è¡Œä¸ºå°è£…åœ¨ç»“æ„è‰¯å¥½çš„å¯¹è±¡ä¸­ã€‚AOMæ—¨åœ¨å¢å¼ºAPIæµ‹è¯•å’Œé›†æˆçš„ç›´è§‚æ€§å’Œå¼¹æ€§ã€‚åœ¨å®è·µä¸­ï¼ŒAOMéœ€è¦ç²¾å¿ƒè®¾è®¡ä¸“é—¨çš„APIå¯¹è±¡ï¼Œä»¥æœ‰æ•ˆåœ°ä¿æŠ¤ç”¨æˆ·å…å—ä¸API è¯·æ±‚ã€å“åº”ã€ç«¯ç‚¹äº¤äº’å’Œèº«ä»½éªŒè¯è¿‡ç¨‹ç›¸å…³çš„å¤æ‚æ€§çš„å½±å“ã€‚</p><p>seldom æ”¯æŒAOM, å¹¶ä¸”æä¾›äº†ä¸€äº›å¥½ç”¨çš„åŠŸèƒ½ï¼Œè¾…åŠ©ä½ ä½¿ç”¨AOM.</p><ul><li>ç›®å½•ç»“æ„å¦‚ä¸‹</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">mypro/</span>
<span class="line">â”œâ”€â”€ api/</span>
<span class="line">â”‚   â”œâ”€â”€ __init__.py</span>
<span class="line">â”‚   â”œâ”€â”€ auth_object.py</span>
<span class="line">â”‚   â””â”€â”€ xxx_object.py</span>
<span class="line">â”œâ”€â”€ test_dir/</span>
<span class="line">â”‚   â”œâ”€â”€ test_auth.py</span>
<span class="line">â”‚   â””â”€â”€ test_xxx.py</span>
<span class="line">â”‚  <span class="token punctuation">..</span>.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åˆ›å»º API Object</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># api/auth_object.py</span></span>
<span class="line"><span class="token keyword">from</span> seldom<span class="token punctuation">.</span>testdata <span class="token keyword">import</span> get_int</span>
<span class="line"><span class="token keyword">from</span> seldom<span class="token punctuation">.</span>request <span class="token keyword">import</span> HttpRequest</span>
<span class="line"><span class="token keyword">from</span> seldom<span class="token punctuation">.</span>request <span class="token keyword">import</span> check_response</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">AuthAPIObject</span><span class="token punctuation">(</span>HttpRequest<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> api_key<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>api_key <span class="token operator">=</span> api_key</span>
<span class="line"></span>
<span class="line">    <span class="token decorator annotation punctuation">@check_response</span><span class="token punctuation">(</span>ret<span class="token operator">=</span><span class="token string">&quot;form.token&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">get_token</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> user_id<span class="token punctuation">:</span><span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token triple-quoted-string string">&quot;&quot;&quot;</span>
<span class="line">        æ¨¡æ‹Ÿï¼šæ ¹æ®ç”¨æˆ·IDç”Ÿæˆç™»å½•token</span>
<span class="line">        :param user_id:</span>
<span class="line">        :return:</span>
<span class="line">        &quot;&quot;&quot;</span></span>
<span class="line">        data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;user_id&quot;</span><span class="token punctuation">:</span> user_id<span class="token punctuation">,</span> <span class="token string">&quot;token&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;t&quot;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>get_int<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">99999</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">        r <span class="token operator">=</span> self<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">&quot;/post?key=&quot;</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>api_key<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> r</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®šä¹‰APIæ¥å£ï¼Œæ ¹æ®<code>get_token()</code>ç”¨äºç”Ÿæˆtokenï¼Œè¿™é‡Œæˆ‘ä»¬é€šè¿‡éšæœºæ•°æ¨¡æ‹Ÿçš„ç”Ÿæˆçš„tokenã€‚<code>check_response()</code>è£…é¥°å™¨ç”¨äºè£…é¥°æ¥å£ï¼Œ<code>form.token</code> ç”¨äºæå–APIçš„è¿”å›å€¼ã€‚</p><ul><li>åˆ›å»ºæµ‹è¯•ç”¨ä¾‹</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># test_dir/test_auth.py</span></span>
<span class="line"><span class="token keyword">import</span> seldom</span>
<span class="line"><span class="token keyword">from</span> api<span class="token punctuation">.</span>auth_object <span class="token keyword">import</span> AuthAPIObject</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">TestAPI</span><span class="token punctuation">(</span>seldom<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">test_case</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        auth_object <span class="token operator">=</span> AuthAPIObject<span class="token punctuation">(</span>api_key<span class="token operator">=</span><span class="token string">&quot;abc123&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        token <span class="token operator">=</span> auth_object<span class="token punctuation">.</span>get_token<span class="token punctuation">(</span>user_id<span class="token operator">=</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    seldom<span class="token punctuation">.</span>main<span class="token punctuation">(</span>debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> base_url<span class="token operator">=</span><span class="token string">&quot;https://httpbin.org&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ç”¨ä¾‹å±‚è°ƒç”¨<code>AuthAPIObject</code>ç±»ä¸‹é¢çš„å¯¹è±¡ï¼Œæµ‹è¯•APIã€‚</p><ul><li>AOM åŸåˆ™</li></ul><p>é¦–å…ˆï¼ŒAPIåªå…è®¸é€šè¿‡çš„APIObjectè¿›è¡Œå°è£…ï¼Œé‚£ä¹ˆåœ¨å°è£…ä¹‹å‰å¯ä»¥æ£€ç´¢ä¸€ä¸‹æ˜¯å¦æœ‰å°è£…äº†ï¼Œå¦‚æœæœ‰ï¼Œè¿›ä¸€æ­¥ç¡®è®¤æ˜¯å¦æ»¡è¶³è‡ªå·±çš„è°ƒç”¨éœ€æ±‚ï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨æµ‹è¯•APIçš„æ—¶å€™ä¸€èˆ¬å„ç§å‚æ•°éªŒè¯ï¼Œå½“APIä½œä¸ºä¾èµ–æ¥å£è°ƒç”¨çš„æ—¶å€™ï¼Œä¸€èˆ¬å‚æ•°æ¯”è¾ƒå°‘ä¸”å›ºå®šï¼Œæ‰€ä»¥ï¼ŒAPIåœ¨å°è£…çš„æ—¶å€™è¦å…¼é¡¾åˆ°è¿™ä¸¤ç§æƒ…å†µã€‚</p><p>å…¶æ¬¡ï¼Œç”¨ä¾‹å±‚åªèƒ½é€šè¿‡APIObjectçš„å°è£…è°ƒç”¨APIï¼Œåƒç™»å½•tokenè¿™ç§å¤§éƒ¨åˆ†APIä¼šç”¨åˆ°çš„ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ç±»åˆå§‹åŒ–æ—¶ä¼ å…¥ï¼Œåç»­è°ƒç”¨ç±»ä¸‹é¢æ–¹æ³•çš„æ—¶å€™å°±ä¸éœ€è¦å…³å¿ƒçš„ã€‚å¦‚æœæ˜¯å¤šä¸ªAPIç»„æˆä¸€ä¸ªåœºæ™¯ï¼Œä¹Ÿå¯ä»¥å†è¿›è¡Œä¸€å±‚ä¸šåŠ¡å±‚çš„å°è£…ã€‚</p>`,14)]))}const c=n(t,[["render",l],["__file","api_object.html.vue"]]),u=JSON.parse('{"path":"/api-testing/api_object.html","title":"API Object","lang":"en-US","frontmatter":{},"headers":[],"git":{"updatedTime":1709562134000,"contributors":[{"name":"defnngj","username":"defnngj","email":"defnngj@gmail.com","commits":2,"url":"https://github.com/defnngj"}],"changelog":[{"hash":"5b98bc53c0afc50869db74de3a6da4d932913a87","time":1709562134000,"email":"defnngj@gmail.com","author":"defnngj","message":"ğŸ“ï¸ update api object doc"},{"hash":"b0f9b427fe5c57219681263e7b0460af8604d5de","time":1709484482000,"email":"defnngj@gmail.com","author":"defnngj","message":"ğŸ“ï¸ api object doc"}]},"filePathRelative":"api-testing/api_object.md"}');export{c as comp,u as data};
